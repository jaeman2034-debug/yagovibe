# ğŸ¤– n8n ì£¼ê°„ ë¦¬í¬íŠ¸ ìë™ ë°œì†¡ ê°€ì´ë“œ

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1ï¸âƒ£ Firebase Functions ì¤€ë¹„
- âœ… weeklyReportAI.ts - ì£¼ê°„ ë¦¬í¬íŠ¸ ìƒì„±
- âœ… sendReportEmail.ts - ì´ë©”ì¼ ë°œì†¡
- âœ… ì™„ì „ ìë™í™” ì¤€ë¹„ ì™„ë£Œ

### 2ï¸âƒ£ n8n ì›Œí¬í”Œë¡œìš° ì„¤ì •
- âœ… Cron íŠ¸ë¦¬ê±° ì„¤ì •
- âœ… HTTP Request ë…¸ë“œ
- âœ… ì´ë©”ì¼ ë°œì†¡ ë…¸ë“œ
- âœ… ìë™ ì‹¤í–‰ í™œì„±í™”

## ğŸ”„ ì™„ì „ ìë™í™” íë¦„

```
ë§¤ì£¼ ì›”ìš”ì¼ 09:00 (Cron)
  â†“
n8n ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
  â†“
HTTP Request â†’ Firebase Function í˜¸ì¶œ
  â†“
Firebase Function â†’ PDF ìƒì„±
  â†“
n8n â†’ ì´ë©”ì¼ ë°œì†¡
  â†“
ê´€ë¦¬ì ìˆ˜ì‹  ì™„ë£Œ âœ…
```

## ğŸ¯ n8n ì›Œí¬í”Œë¡œìš° ì„¤ì •

### 1ë‹¨ê³„: ì›Œí¬í”Œë¡œìš° ìƒì„±
1. n8n ì ‘ì†: `http://localhost:5678` ë˜ëŠ” ë°°í¬ ì„œë²„
2. ìƒˆ ì›Œí¬í”Œë¡œìš° ìƒì„±
3. ì´ë¦„: "Weekly Report Auto Mailer"

### 2ë‹¨ê³„: Cron íŠ¸ë¦¬ê±° ë…¸ë“œ

#### ì„¤ì •
```
Mode: Every Week
Day of Week: Monday
Time: 09:00
Timezone: Asia/Seoul
```

#### ë…¸ë“œ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cron      â”‚ â† ë§¤ì£¼ ì›”ìš”ì¼ 09:00
â”‚  (Every 1)  â”‚
â”‚   Week      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
```

### 3ë‹¨ê³„: HTTP Request ë…¸ë“œ

#### ì„¤ì •
```
Method: POST
URL: https://asia-northeast3-yago-vibe-spt.cloudfunctions.net/generateWeeklyReport
Authentication: None
Headers:
  - Content-Type: application/json
Body (JSON):
{
  "pdfUrl": "auto",
  "reportDate": "={{$now.toISOString().split('T')[0]}}"
}
```

#### ë…¸ë“œ êµ¬ì„±
```
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚HTTP Request â”‚ â† Firebase Function í˜¸ì¶œ
â”‚   (POST)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
```

### 4ë‹¨ê³„: ì´ë©”ì¼ ë°œì†¡ ë…¸ë“œ

#### ì„¤ì • (Gmail SMTP)
```
To: admin@yagov JAVA.com
Subject: ğŸ“Š YAGO VIBE ì£¼ê°„ ë¦¬í¬íŠ¸ ({{$json.reportDate}})
HTML Content:
<h2>ğŸ“Š YAGO VIBE AI ì£¼ê°„ ë¦¬í¬íŠ¸</h2>
<p>ì´ë²ˆ ì£¼ ë¦¬í¬íŠ¸ê°€ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<a href="{{$json.pdfUrl}}">ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ</a>
```

#### ë…¸ë“œ êµ¬ì„±
```
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Email     â”‚ â† ì´ë©”ì¼ ë°œì†¡
â”‚    Send     â”‚
â”‚   (SMTP)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ì „ì²´ ì›Œí¬í”Œë¡œìš° êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron   â”‚â”€â”€â”€â”€â–¶â”‚HTTP Request  â”‚â”€â”€â”€â”€â–¶â”‚  Email   â”‚
â”‚(Monday  â”‚     â”‚Firebase      â”‚     â”‚   Send   â”‚
â”‚ 09:00)  â”‚     â”‚Function      â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ë…¸ë“œ ì„¤ì • ìƒì„¸

### Cron íŠ¸ë¦¬ê±°
```json
{
  "triggerTimes": {
    "timezone": "Asia/Seoul",
    "item": [
      {
        "mode": "everyWeek",
        "day": 1,
        "hour": 9,
        "minute": 0
      }
    ]
  }
}
```

### HTTP Request
```json
{
  "method": "POST",
  "url": "https://asia-northeast3-yago-vibe-spt.cloudfunctions.net/generateWeeklyReport",
  "sendBody": true,
  "bodyParameters": {
    "parameters": [
      {
        "name": "reportDate",
        "value": "={{$now.toISOString().split('T')[0]}}"
      }
    ]
  },
  "options": {
    "headers": {
      "Content-Type": "application/json"
    }
  }
}
```

### Email Send (Gmail SMTP)
```json
{
  "authentication": "predefinedCredentialType",
  "credentialType": "gmailOAuth2",
  "emailType": "html",
  "options": {
    "attachments": false
  },
  "to": "admin@yagovibe.com",
  "subject": "ğŸ“Š YAGO VIBE ì£¼ê°„ ë¦¬í¬íŠ¸ ({{$json.reportDate}})",
  "html": "<h2>ğŸ“Š YAGO VIBE AI ì£¼ê°„ ë¦¬í¬íŠ¸</h2><p>ì´ë²ˆ ì£¼ ë¦¬í¬íŠ¸ê°€ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p><a href=\"{{$json.pdfUrl}}\">ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ</a>"
}
```

## ğŸš€ ë°°í¬ ë° í™œì„±í™”

### 1. ì›Œí¬í”Œë¡œìš° ì €ì¥
- ì›Œí¬í”Œë¡œìš° í¸ì§‘ ì™„ë£Œ í›„ "Save" í´ë¦­

### 2. ìë™ ì‹¤í–‰ í™œì„±í™”
- ìš°ì¸¡ ìƒë‹¨ "Activate" í† ê¸€ ON (ì´ˆë¡ë¶ˆ)

### 3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- "Execute Workflow" í´ë¦­í•˜ì—¬ ìˆ˜ë™ í…ŒìŠ¤íŠ¸

### 4. ë¡œê·¸ í™•ì¸
- ì‹¤í–‰ ê¸°ë¡ì—ì„œ ê° ë…¸ë“œ ìƒíƒœ í™•ì¸

## ğŸ’¡ ê³ ê¸‰ ì˜µì…˜

### Slack ì•Œë¦¼ ì¶”ê°€ (ì„ íƒ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron   â”‚â”€â”€â”€â”€â–¶â”‚HTTP Request  â”‚â”€â”€â”€â”€â–¶â”‚  Email   â”‚â”€â”€â”€â”€â–¶â”‚  Slack   â”‚
â”‚         â”‚     â”‚              â”‚     â”‚          â”‚     â”‚  Message â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Slack ë…¸ë“œ ì„¤ì •
```
Channel: #weekly-reports
Text: âœ… ì£¼ê°„ ë¦¬í¬íŠ¸ ë°œì†¡ ì™„ë£Œ!
```

### ì—ëŸ¬ ì²˜ë¦¬ ë…¸ë“œ ì¶”ê°€ (ì„ íƒ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron   â”‚â”€â”€â”€â”€â–¶â”‚HTTP Request  â”‚â”€â”€â”€â”€â–¶â”‚   ngx    â”‚
â”‚         â”‚     â”‚              â”‚     â”‚   Send   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“ (Error)
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Send    â”‚
                 â”‚  Alert   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ì£¼ìš” íŠ¹ì§•

### ì™„ì „ ìë™í™”
- âœ… ì‚¬ëŒ ê°œì… ì—†ì´ ìë™ ì‹¤í–‰
- âœ… ë§¤ì£¼ ì›”ìš”ì¼ 09:00 ìë™ íŠ¸ë¦¬ê±°
- âœ… ëª¨ë“  ê³¼ì • ìë™í™”

### ì—ëŸ¬ ì²˜ë¦¬
- âœ… ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ê°€ëŠ¥
- âœ… ë¡œê·¸ ìë™ ê¸°ë¡
- âœ… ì¬ì‹œë„ ì„¤ì • ê°€ëŠ¥

### í™•ì¥ ê°€ëŠ¥
- âœ… Slack, Discord, Telegram ì¶”ê°€ ê°€ëŠ¥
- âœ… ë‹¤ì¤‘ ìˆ˜ì‹ ì ì„¤ì • ê°€ëŠ¥
- âœ… ì»¤ìŠ¤í…€ í…œí”Œë¦¿ ì‚¬ìš© ê°€ëŠ¥

## ğŸ“§ ì´ë©”ì¼ í…œí”Œë¦¿ ì˜ˆì‹œ

### ê¸°ë³¸ í…œí”Œë¦¿
```html
<h2>ğŸ“Š YAGO VIBE AI ì£¼ê°„ ë¦¬í¬íŠ¸</h2>
<div style="background-color: #f3f4f6; padding: 20px; border-radius: 8px;">
  <p><strong>ë¦¬í¬íŠ¸ ìƒì„±ì¼:</strong> {{$json.reportDate}}</p>
  <p><strong>ë‹¤ìš´ë¡œë“œ:</strong> <a href="{{$json.pdfUrl}}">PDF íŒŒì¼</a></p>
</div>
```

### ê³ ê¸‰ í…œí”Œë¦¿
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial, sans-serif; }
    .container { max-width: 600px; margin: 0 auto; }
    .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; }
    .content { padding: 20px; background-color: #ffffff; }
    .button { background-color: #667eea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“Š YAGO VIBE AI ì£¼ê°„ ë¦¬í¬íŠ¸</h1>
    </div>
    <div class="content">
      <p>ì´ë²ˆ ì£¼ ë¦¬í¬íŠ¸ê°€ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
      <a href="{{$json.pdfUrl}}" class="button">ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ</a>
    </div>
  </div>
</body>
</html>
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ìˆ˜ë™ ì‹¤í–‰
1. n8n ì›Œí¬í”Œë¡œìš° í¸ì§‘ í™”ë©´
2. "Execute Workflow" í´ë¦­
3. ê° ë…¸ë“œ ê²°ê³¼ í™•ì¸

### ìë™ ì‹¤í–‰ í™•ì¸
1. "Activate" í† ê¸€ ON
2. ë§¤ì£¼ ì›”ìš”ì¼ 09:00 ëŒ€ê¸°
3. ì´ë©”ì¼ ìˆ˜ì‹  í™•ì¸

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] n8n ì ‘ì† í™•ì¸
- [x] ì›Œí¬í”Œë¡œìš° ìƒì„±
- [x] Cron íŠ¸ë¦¬ê±° ì„¤ì •
- [x] HTTP Request ë…¸ë“œ ì„¤ì •
- [x] Email Send ë…¸ë“œ ì„¤ì •
- [ ] ì›Œí¬í”Œë¡œìš° í™œì„±í™”
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- [ ] ìë™ ì‹¤í–‰ í™•ì¸

---

**ğŸ‰ n8n ì£¼ê°„ ë¦¬í¬íŠ¸ ìë™ ë°œì†¡ ì‹œìŠ¤í…œ ì™„ë£Œ!**

ë§¤ì£¼ ì›”ìš”ì¼ ì•„ì¹¨, ìë™ìœ¼ë¡œ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë˜ì–´ ë°œì†¡ë©ë‹ˆë‹¤! ğŸ¤–ğŸ“§âœ¨

