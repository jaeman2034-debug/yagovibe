<!DOCTYPE html>
<html>
<head>
    <title>ìƒí’ˆ ë°ì´í„° í™•ì¸</title>
</head>
<body>
    <h1>ğŸ” ì‹¤ì œ ìƒí’ˆ ë°ì´í„° í™•ì¸</h1>
    <button onclick="checkData()">ë°ì´í„° í™•ì¸í•˜ê¸°</button>
    <pre id="result"></pre>

    <script type="module">
        // Firebase ëª¨ë“ˆ import (ì‹¤ì œ í”„ë¡œì íŠ¸ì˜ ê²½ë¡œì— ë§ê²Œ ìˆ˜ì • í•„ìš”)
        async function checkData() {
            try {
                const { db } = await import('./src/lib/firebase.ts');
                const { collection, getDocs, limit, query } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                console.log("ğŸ” Firestoreì—ì„œ ì‹¤ì œ ìƒí’ˆ ë°ì´í„° í™•ì¸ ì¤‘...\n");
                
                const q = query(collection(db, "marketProducts"), limit(1));
                const snapshot = await getDocs(q);
                
                if (snapshot.empty) {
                    document.getElementById('result').textContent = "âŒ ì €ì¥ëœ ìƒí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
                    return;
                }
                
                const doc = snapshot.docs[0];
                const data = doc.data();
                
                const result = {
                    id: doc.id,
                    ...data,
                    createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt || null
                };
                
                const jsonString = JSON.stringify(result, null, 2);
                const oneLine = JSON.stringify(result);
                
                document.getElementById('result').textContent = 
                    "âœ… ì‹¤ì œ ì €ì¥ëœ ìƒí’ˆ ë°ì´í„°:\n\n" + 
                    jsonString + 
                    "\n\nğŸ“‹ í•œ ì¤„ ë²„ì „:\n" + 
                    oneLine;
                
                console.log("âœ… ì‹¤ì œ ì €ì¥ëœ ìƒí’ˆ ë°ì´í„° (1ê°œ):\n", jsonString);
                console.log("ğŸ“‹ í•œ ì¤„ ë²„ì „:", oneLine);
                
            } catch (error) {
                document.getElementById('result').textContent = "âŒ ì˜¤ë¥˜: " + error.message;
                console.error("âŒ ì˜¤ë¥˜:", error);
            }
        }
        
        window.checkData = checkData;
    </script>
</body>
</html>

